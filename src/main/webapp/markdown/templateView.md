# Template View

*Template transforms information into HTML by embedding certain markers into a template file.*

This is a simple pattern with only 3 distinct components:

1. Model, the raw data to be displayed
1. Helper, to transform the model to html
1. Template, to be used to transform by search for markers and replacing the markers with data

## Implementation 

We have used this pattern in partnership with the transform pattern. We have used template view to combine different parts of the application. We have written a very basic html page which can be found in `templates/tutorial.html`. A truncated version of the template is given:

```html
<main role='main' class='container'>

	{{nav}}

	{{markdown}}

	<footer class="text-center center-block">
		<a href="https://www.facebook.com/eric.vader.sylar"><i id="social-fb" class="fa fa-facebook-square fa-3x social"></i></a>
		<a href="https://twitter.com/eric_vader"><i id="social-tw" class="fa fa-twitter-square fa-3x social"></i></a>
		<a href="https://plus.google.com/u/0/110923786167139743065"><i id="social-gp" class="fa fa-google-plus-square fa-3x social"></i></a>
		<a href="mailto:mail@eric-han.com"><i id="social-em" class="fa fa-envelope-square fa-3x social"></i></a>
	</footer>
</main>
```

The markers that are used in our application are using curly braces `{{<?>}}` where `<?>` is the key to be used to perform the lookup. We also note that the value for `nav` key is provided for by the transform pattern. Navigation is a object that is transformed into html by the transform view pattern. Although these 2 patterns seem like they are at logger heads with one another, but we have demostrated that they can work hand in hand. We have designed the Template View pattern to work generically acorss different models.

> Our implementation is influenced by the Mustache framework.

<iframe src="uml/templateView"></iframe>

* **Template**: Base class that all templatable objects will inherit from, provides for the common actions
	* **CmdDir**: This is the navigation bar, the key is `nav`, html generation is provided by transform view
	* **Markdown**: This is the body of each of the tutorial pages, the html is generated by commonmark library from markdown code, the key is `markdown`
	* **Title**: This represents the title for each of the tutorial pages, the key is `title`
* **TemplateHelper**: Provides functionality to convert each of the template to html code.

### How it works?

Simply put, the user will need to embed markers into static html pages. The Template helper will find and replace the markers with relevant dynamic content relevant to the user. There are many possible ways to implement the find and replace efficiently but we will just simply use the defined Java `replaceAll` function. The generated html is then passed on to another layer that handles the returning to the user. We also note that the replacing of the string is done when the action is performed by the end user to simulate dynamic content on the web application.

### When to use it?

This pattern is usally implemented with the Model View Controller and the designer often will make a choice between template view and transform view. However, there might not be a need to make the choice. It is my opinion that one will select the mechanism by the needs of the application. If one's application needs compositon of different elements and does not mind the application becomes harder to test due to increased complecity in the helper class, then template view should be used. The choice for transform view can also be made based on user requirements. 

We have demostrated that template view and transform view can co exist together and the designer can choose and mix the implementations based on the individual requirements of the components.

## Real Application

There are countless applications, one of the popular ones are:

1. [Mustache](https://mustache.github.io/), avaliable in many different languages

## References

1. Patterns Of Enterprise Application Architecture: Page 350
1. [Martin Fowler](https://martinfowler.com/eaaCatalog/templateView.html)
